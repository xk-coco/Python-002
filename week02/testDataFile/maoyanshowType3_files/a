;/*
 * MTA v1.1.7
 * (c) 2014-2020
 * 美团点评 - 性能平台 
 */
!function(){"use strict";function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function e(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e){return"number"==typeof e}var s=Array.prototype,t=Object.prototype,c=t.hasOwnProperty,n=t.toString,y=function(e){return"function"==typeof e};function h(e){if("undefined"!=typeof JSON&&y(JSON.stringify))return JSON.stringify(e);switch(f(e)){case"string":return'"'.concat(e,'"');case"boolean":case"number":return String(e);case"object":if(null===e)return"null";var t=!1,n="",r="";for(var o in e)if(c.call(e,o)){r="'".concat(o,"'");var i=h(e[o]);i.length&&(t?n+=",":t=!0,n+=p(e)?i:'"'.concat(r,'":').concat(i))}return p(e)?"[".concat(n,"]"):"{".concat(n,"}");default:return""}}function g(e){if("object"!==f(e)&&"function"!=typeof e||null===e)return[];if(y(Object.keys))return Object.keys(e);var t=[];for(var n in e)c.call(e,n)&&t.push(n);return t}function p(e){return y(Array.isArray)?Array.isArray(e):"[object Array]"===n.call(e)}function v(e,t,n){if(y(s.map))return e.map(t,n);for(var r=[],o=e.length,i=0;i++<o;)r.push(t.call(n,e[i],i,e));return r}function m(e,n){if(y(s.forEach))e.forEach(function(e,t){n(e,t)});else for(var t=e.length,r=0;r++<t;)n(e[r],r)}function w(e,t,n){if(y(s.filter))return e.filter(t,n);for(var r=[],o=e.length,i=0;i++<o;)t.call(n,e[i],i,e)&&r.push(e[i]);return r}function _(){}function E(e){var t=document.cookie,n=t.indexOf(";",e);return-1===n&&(n=t.length),decodeURIComponent(t.substring(e,n))}var b={get:function(e){for(var t=document.cookie,n="".concat(e,"="),r=n.length,o=t.length,i=0;i<o;){var a=i+r;if(t.substring(i,a)===n)return E(a);if(0===(i=t.indexOf(" ",i)+1))break}return""},set:function(e,t,n,r,o,i){o=o||function(){var e=document.domain;if("localhost:"===e)return"";"undefined"!=typeof M&&M.DOMAIN_HOST&&(e=".".concat(M.DOMAIN_HOST));"www."===e&&(e=e.substring(0,4));return e}();var a=(r?"; path=".concat(r):"")+(o?"; domain=".concat(o):"")+(i?"; secure":"");document.cookie=t?"".concat(e,"=").concat(encodeURIComponent(String(t)))+(n?"; expires=".concat(n):"")+a:"".concat(e,"=; expires=Thu, 01 Jan 1970 00:00:01 GMT")+(r?"; path=".concat(r):"")+a},getExpire:function(e,t,n){var r=new Date;if(a(e)&&a(t)&&a(n))return r.setDate(r.getDate()+parseInt(e,10)),r.setHours(r.getHours()+parseInt(t,10)),r.setMinutes(r.getMinutes()+parseInt(n,10)),r.toUTCString()}},S={};function k(e,t,n,r){var o=3<arguments.length&&void 0!==r&&r;if(e)return e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on".concat(t),n):void 0}var C={on:function(e,t){y(t)&&(S[e]||(S[e]=[])).push(t)},emit:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],o=t.slice(1);if(S[r])for(var i=0;i<S[r].length;i++)S[r][i].apply(this,o)},addEvent:function(e,t){k(window,e,t,2<arguments.length&&void 0!==arguments[2]&&arguments[2])},removeEvent:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return window.removeEventListener?window.removeEventListener(e,t,n):window.detachEvent?window.detachEvent("on".concat(e),t):void 0},addEventToSelectors:function(e,n,r){var o=3<arguments.length&&void 0!==arguments[3]&&arguments[3];e&&0<e.length?e.forEach(function(e){var t=document.getElementById(e);t&&k(t,n,r,o)}):k(window,n,r,o)}};function T(e,t){return e<=0||t<=0||e-t<=0?0:parseInt(e-t,10)}function j(e,t){var n,r={};for(n in e)r[n]=e[n];for(n in t)t.hasOwnProperty(n)&&void 0!==t[n]&&(r[n]=t[n]);return r}function O(){return window.autoincrement++,window.autoincrement.toString()}var I=function(){var r="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};function n(){n=function(){},r.Symbol||(r.Symbol=e)}var o=0;function e(e){return"jscomp_symbol_"+(e||"")+o++}function i(){n();var e=r.Symbol.iterator;e=e||(r.Symbol.iterator=r.Symbol("iterator")),"function"!=typeof Array.prototype[e]&&t(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return a(this)}}),i=function(){}}function a(e){var t,n=0;return t=function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}},i(),(t={next:t})[r.Symbol.iterator]=function(){return this},t}function d(e){i();var t=e[Symbol.iterator];return t?t.call(e):a(e)}function h(e){if(!(e instanceof Array)){e=d(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}var g=0;var p="img script iframe link audio video source".split(" ");function v(e,t){for(var n=(e=d(e)).next();!n.done;n=e.next())if(n=n.value,t.includes(n.nodeName.toLowerCase())||v(n.children,t))return!0;return!1}function m(e,t){if(2<e.length)return performance.now();for(var n=[],r=(t=d(t)).next();!r.done;r=t.next())r=r.value,n.push({timestamp:r.start,type:"requestStart"}),n.push({timestamp:r.end,type:"requestEnd"});for(r=(t=d(e)).next();!r.done;r=t.next())n.push({timestamp:r.value,type:"requestStart"});for(n.sort(function(e,t){return e.timestamp-t.timestamp}),e=e.length,t=n.length-1;0<=t;t--)switch((r=n[t]).type){case"requestStart":e--;break;case"requestEnd":if(2<++e)return r.timestamp;break;default:throw Error("Internal Error: This should never happen")}return 0}function s(e){e=e||{},this.w=!!e.useMutationObserver,this.u=e.minValue||null,e=window.__tti&&window.__tti.e;var o,i,a,s,c,u,l,r,n,t,f=window.__tti&&window.__tti.o;this.a=e?e.map(function(e){return{start:e.startTime,end:e.startTime+e.duration}}):[],f&&f.disconnect(),this.b=[],this.f=new Map,this.j=null,this.v=-1/0,this.i=!1,this.h=this.c=this.s=null,o=this.m.bind(this),i=this.l.bind(this),a=XMLHttpRequest.prototype.send,s=g++,XMLHttpRequest.prototype.send=function(e){for(var t=[],n=0;n<arguments.length;++n)t[n-0]=arguments[n];var r=this;return o(s),this.addEventListener("readystatechange",function(){4===r.readyState&&i(s)}),a.apply(this,t)},c=this.m.bind(this),u=this.l.bind(this),l=fetch,fetch=function(e){for(var o=[],t=0;t<arguments.length;++t)o[t-0]=arguments[t];return new Promise(function(t,n){var r=g++;c(r),l.apply(null,[].concat(h(o))).then(function(e){u(r),t(e)},function(e){u(e),n(e)})})},(r=this).c=new PerformanceObserver(function(e){for(var t=(e=d(e.getEntries())).next();!t.done;t=e.next())if("resource"===(t=t.value).entryType&&(r.b.push({start:t.fetchStart,end:t.responseEnd}),w(r,m(r.g,r.b)+5e3)),"longtask"===t.entryType){var n=t.startTime+t.duration;r.a.push({start:t.startTime,end:n}),w(r,n+5e3)}}),r.c.observe({entryTypes:["longtask","resource"]}),this.w&&(this.h=(n=this.B.bind(this),(t=new MutationObserver(function(e){for(var t=(e=d(e)).next();!t.done;t=e.next())"childList"==(t=t.value).type&&v(t.addedNodes,p)?n(t):"attributes"==t.type&&p.includes(t.target.tagName.toLowerCase())&&n(t)})).observe(document,{attributes:!0,childList:!0,subtree:!0,attributeFilter:["href","src"]}),t))}function c(e){e.i=!0;var t=0<e.a.length?e.a[e.a.length-1].end:0,n=m(e.g,e.b);w(e,Math.max(n+5e3,t))}function w(i,e){!i.i||i.v>e||(clearTimeout(i.j),i.j=setTimeout(function(){var e=performance.timing.navigationStart,t=m(i.g,i.b);e=(window.a&&window.a.A?1e3*window.a.A().C-e:0)||performance.timing.domContentLoadedEventEnd-e;if(i.u)var n=i.u;else n=performance.timing.domContentLoadedEventEnd?(n=performance.timing).domContentLoadedEventEnd-n.navigationStart:null;var r=performance.now();null===n&&w(i,Math.max(t+5e3,r+1e3));var o=i.a;(t=r-t<5e3?null:r-(t=o.length?o[o.length-1].end:e)<5e3?null:Math.max(t,n))&&(i.s(t),clearTimeout(i.j),i.i=!1,i.c&&i.c.disconnect(),i.h&&i.h.disconnect()),w(i,performance.now()+1e3)},e-performance.now()),i.v=e)}s.prototype.getFirstConsistentlyInteractive=function(){var t=this;return new Promise(function(e){t.s=e,"complete"==document.readyState?c(t):window.addEventListener("load",function(){c(t)})})},s.prototype.m=function(e){this.f.set(e,performance.now())},s.prototype.l=function(e){this.f.delete(e)},s.prototype.B=function(){w(this,performance.now()+5e3)},r.Object.defineProperties(s.prototype,{g:{configurable:!0,enumerable:!0,get:function(){return[].concat(h(this.f.values()))}}});var u={getFirstConsistentlyInteractive:function(e){return e=e||{},"PerformanceLongTaskTiming"in window?new s(e).getFirstConsistentlyInteractive():Promise.resolve(null)}};return"undefined"!=typeof module&&module.exports?module.exports=u:"function"==typeof define&&define.amd?define("ttiPolyfill",[],function(){return u}):u}.call(window),x=function(){function t(e){o(this,t),u(this,"_MAX_URL_LENGTH",2083),this.url=e}return e(t,[{key:"config",value:function(e){this.url=e}},{key:"send",value:function(e,t){if(h(e).length)return this._post(e,t)}},{key:"_sendByScript",value:function(e){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="".concat(this.url,"?").concat(e);var n=document.getElementsByTagName("script")[0];n.parentNode&&n.parentNode.insertBefore(t,n)}},{key:"_post",value:function(e,t){return function(e){if("file:"!==window.location.protocol){var t,n=l({method:"GET",async:!0,success:_,fail:_},e),r=-1!==window.navigator.appName.indexOf("Microsoft Internet Explorer")&&(-1!==window.navigator.userAgent.indexOf("MSIE 8.0")||-1!==window.navigator.userAgent.indexOf("MSIE 9.0"))&&window.XDomainRequest;(t=r?new XDomainRequest:new XMLHttpRequest).open(n.method,n.url,n.async);var o=function(e){e&&/dreport.meituan.net/.test(n.url)&&(200===e.currentTarget.status?n.success&&n.success():n.fail&&n.fail())};if(/dreport.meituan.net/.test(n.url)&&!r)if("addEventListener"in t)t.addEventListener("load",o),t.addEventListener("error",o),t.addEventListener("abort",o);else try{var i=t.onreadystatechange;t.onreadystatechange=function(e){4===this.readyState&&o(e),i&&i.apply(this,arguments)}}catch(e){console.log(e)}try{t.send(h(n.data))}catch(e){}return t}}({url:this.url,method:"POST",data:e,success:t&&t.success,fail:t&&t.fail})}}]),t}(),L=function(){function r(){o(this,r),u(this,"_COOKIE_USER_TRACKING","__mta");var e=window.screen,t=window.navigator,n=this._getViewport();this.screen=e?"".concat(e.width,"x").concat(e.height):"-",this.viewport="".concat(n.width,"x").concat(n.height),this.javaEnabled=t&&t.javaEnabled()?1:0,this.ua=t.userAgent,this.isFirstVisit=!1,this._setCookie(),this.visit_id=this._getVisitId()}return e(r,[{key:"getInfo",value:function(){return{sr:this.screen,vp:this.viewport,csz:document.cookie?document.cookie.length:0,ua:this.ua,uuid:this.uuid,url:location.href,sdkVersion:"1.1.7",region:"",operator:"",network:this._getNetwork(),container:"",os:"",visit_id:this.visit_id}}},{key:"_getVisitId",value:function(){var e=0;try{e=([1e7].toString()+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(e){return(Number(e)^window.crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16)})}catch(e){console.log(e)}return e}},{key:"_setCookie",value:function(){var e=b.getExpire(720,0,0),t=this._getCurrentTime(),n=b.get(this._COOKIE_USER_TRACKING);if(n){var r=n.split(".");r[2]=r[3],r[3]=String(t),r[4]=String(parseInt(r[4],10)+1),b.set(this._COOKIE_USER_TRACKING,r.join("."),e),this.uuid=r[1]}else{var o=this._hashInfo();n=[o,t,t,t,1].join("."),b.set(this._COOKIE_USER_TRACKING,n,e),this.isFirstVisit=!0,this.uuid=String(o)}}},{key:"_getCurrentTime",value:function(){return(new Date).getTime()}},{key:"_hashInfo",value:function(){for(var e=window,t=e.navigator,n=e.history.length,r=t.appName+t.appVersion+this._getEnvLanguage()+t.platform+t.userAgent+this.javaEnabled+this.screen+(document.cookie?document.cookie:"")+(document.referrer?document.referrer:""),o=r.length;0<n;)r+=n--^o++;return function(e){var t,n=1,r=0;if(e)for(n=0,t=e.length-1;0<=t;t--)n=0!==(r=266338304&(n=(n<<6&268435455)+(r=e.charCodeAt(t))+(r<<14)))?n^r>>21:n;return n}(r)}},{key:"_getViewport",value:function(){var e={width:document.body&&document.body.clientWidth||0,height:document.body&&document.body.clientHeight||0};return null!==window.innerWidth&&(e={width:window.innerWidth,height:window.innerHeight}),"CSS1Compat"===document.compatMode&&(e={width:document.documentElement&&document.documentElement.clientWidth||0,height:document.documentElement&&document.documentElement.clientHeight||0}),e}},{key:"_getEnvLanguage",value:function(){return(navigator&&(navigator.language?navigator.language:navigator.browserLanguage?navigator.browserLanguage:"-")).toLowerCase()}},{key:"_getNetwork",value:function(){var e=b.get("network");if(!e){var t=window.navigator.userAgent,n=/NetType\/([a-zA-Z0-9]+)/;t&&n.test(t)&&(e=t.match(n)[1])}return e||""}}]),r}(),P="error",A=["project","page_url","real_url","resource_url","sec_category","level","ts","content"],R=["line","column","tags"].concat(A),N=function(){function n(e){if(o(this,n),e){var t;for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);this.parse(e)}}return e(n,[{key:"parse",value:function(){this.level||(this.level=P),this.ts||(this.ts=+new Date),this.sec_category||(this.sec_category="default")}},{key:"isEqual",value:function(e){return this.sec_category===e.sec_category&&this.resource_url===e.resource_url&&this.column===e.column&&this.line===e.line&&this.content===e.content}},{key:"update",value:function(e){for(var t in e)void 0!==e[t]&&-1!==R.indexOf(t)&&(this[t]=e[t]);return this}},{key:"updateTags",value:function(e){var t=j(this.tags||{},e);return this.tags=t,this}},{key:"toJson",value:function(){var t=this,n={};return A.map(function(e){void 0!==t[e]&&(n[e]=t[e])}),n}}]),n}(),q="metrics_cache";var D={isSupport:function(){var e="local_test";try{localStorage.setItem(e,1),localStorage.removeItem(e)}catch(e){return!1}return!0}(),get:function(){if(this.isSupport){var e=[];try{var t=localStorage.getItem(q);t&&(e=JSON.parse(t))}catch(e){console.log(e)}return e}},add:function(e){if(this.isSupport&&e instanceof Array){var t=this.get();e=e.concat(t);try{localStorage.setItem(q,JSON.stringify(e))}catch(e){console.log(e)}}},clear:function(){if(this.isSupport)try{localStorage.removeItem(q)}catch(e){console.log(e)}}},F=function(){function n(e){var t=this;o(this,n),this.cfgManager=e,this.jsErrorEnable=e.jsError&&e.jsError.enable,this.jsErrorApi=e.url,this.beacon=new x(e.url),this.client=new L,this.cache=[],this.cacheSending={},this.comboTimeout=0,this.timeLimit=Date.now(),this.errorCount=0,this.isTimeLimit=!1,this.detectLeave(),this.getJsErrorConfig=function(e){return t.cfgManager.jsError&&t.cfgManager.jsError[e]}}return e(n,[{key:"_handleError",value:function(t){try{var e=this.getJsErrorConfig("onErrorPush");if(e instanceof Function&&(t=e(t)),t instanceof N||void 0===t)return t;console.log("onErrorPush\u65b9\u6cd5\u8fd4\u56de\u7ed3\u679c\u6709\u8bef")}catch(e){return console.log("onErrorPush\u65b9\u6cd5\u5904\u7406\u6709\u8bef",e),t}}},{key:"parseWindowError",value:function(e,t,n,r,o){try{o&&o.stack?this.push(o):"string"==typeof e&&this._push({sec_category:e,resource_url:t,line:n,column:r})}catch(e){this.reportSystemError(e)}}},{key:"parsePromiseUnhandled",value:function(e){if(e)try{var t=e.reason;t&&(t instanceof Error?this.push(t,{sec_category:"unhandledrejection"}):this._push({sec_category:"unhandledrejection",content:t}))}catch(e){console.log(e)}}},{key:"parseConsoleError",value:function(){try{var e=[].slice.call(arguments);if(!e||!e.length)return;for(var t=[],n=0;n<e.length;n++){var r=e[n];"string"!=typeof e[n]&&(r=e[n]instanceof window.Error?JSON.stringify(e[n].stack):JSON.stringify(e[n])),t.push(r)}t&&t.length&&this._push({sec_category:"consoleError",content:t.join(" ")})}catch(e){this.reportSystemError(e)}}},{key:"detectLeave",value:function(){var u=arguments,l=this;try{var f=window.onbeforeunload;window.onbeforeunload=function(){var e,t=l.addCacheExtension(),n=l.cacheSending,r=t;if(g(n))for(var o in n)if(n.hasOwnProperty(o)&&void 0!==n[o]){var i=n[o],a=i.xhr,s=i.cache;try{a.abort()}catch(e){console.log(e)}r=r.concat(s)}if(r&&r.length)if(window.navigator.sendBeacon&&l.getJsErrorConfig("useSendBeacon")){var c=function(e,t){if(!t)return e;var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push(r+"="+t[r]);return~e.indexOf("?")?e+"&"+n.join("&"):e+"?"+n.join("&")}(l.cfgManager.url,{beacon:1});window.navigator.sendBeacon(c,(e=r,"c="+encodeURIComponent(JSON.stringify(e))))}else l.getJsErrorConfig("disableCache")||D.add(r);f&&f.apply(l,u)}}catch(e){console.log(e)}}},{key:"checkCache",value:function(){var e=this;if(!this.getJsErrorConfig("disableCache")){var t=D.get();t&&t.length&&setTimeout(function(){e.doSend({url:e.cfgManager.url,data:t,success:function(){D.clear()}})},1500)}}},{key:"reportSystemError",value:function(e){e&&e.stack&&(this.cache.push(new N({project:"metrics",page_url:"default",real_url:window.location.href,sec_category:e.msg||e.name||"parseError",content:JSON.stringify(e.stack),flow_ids:this.cfgManager.getFlowIds(),id:O()})),this.send(!0))}},{key:"_processError",value:function(t){function u(e){return{sec_category:"Invalid_Error",content:"object"===f(e)?JSON.stringify(e):e}}try{return function(e){var t,n=e.line,r=e.column,o=e.message||e.name||"";if(e.stack){var i=e.stack.match("https?://[^\n]+");i=i?i[0]:"";var a=/https?:\/\/(\S)*\.js/,s="";a.test(i)&&(s=i.match(a)[0]);var c=i.match(":(\\d+):(\\d+)");return c=c||[0,0,0],{sec_category:o,content:(t=e)&&t.stack||"",line:void 0!==n?n:c[1],column:void 0!==r?r:c[2],resource_url:s}}return u(e)}(t)}catch(e){return this.reportSystemError(t),u(t)}}},{key:"_push",value:function(e,t){e=this.parse(e),this.push(new N(e),t)}},{key:"_pushResource",value:function(){1<Math.random()||this._push.apply(this,arguments)}},{key:"parse",value:function(e){return e.project||(e.project=this.cfgManager.clientInfo.token),e.page_url||(e.page_url=location.href||"default"),e.real_url=window.location.href,e}},{key:"push",value:function(e,t){var n=1<arguments.length&&void 0!==t?t:{};if(e&&!(Math.random()>this.getJsErrorConfig("sample")))if(e instanceof N||(e instanceof Error?e=this._processError(e):"string"==typeof e?e={sec_category:e}:"object"===f(e)&&(e={sec_category:e.name,content:e.msg}),e=this.parse(e),e=new N(e)),e&&e.content&&e.content.length>=this.getJsErrorConfig("maxSize"))console.log("[Error]: \u9519\u8bef\u957f\u5ea6\u5927\u4e8e".concat(this.getJsErrorConfig("maxSize")));else{e.update(n);var r=this.getJsErrorConfig("filters"),o=!0;if(this.getJsErrorConfig("noScriptError")&&0===e.sec_category.indexOf("Script error"))return!1;if(r&&r.length)for(var i=0;i<r.length;i++){if(!r[i].fn(e))return!1}var a=this.getJsErrorConfig("ignoreList");if(a&&a.length)for(var s=0;s<a.length;s++){var c=a[s];if(0===e.sec_category.indexOf(c)){o=!1;break}}o&&(this.isExist(e)||(this.onPush&&this.onPush(e),(e=this._handleError(e))&&(e.id=O(),e.flow_ids=this.cfgManager.getFlowIds(),this.cache.push(e),this.send())))}}},{key:"isExist",value:function(e){for(var t=0;t<this.cache.length;t++){var n=this.cache[t];if(n instanceof N||(n=new N(n)),n.isEqual(e))return!0}return!1}},{key:"report",value:function(){this.push.apply(this,arguments),this.send(!0)}},{key:"send",value:function(e){var r=this,t=this.cfgManager,o=this.comboTimeout,i=this.getJsErrorConfig("maxNum")||100,a=this.getJsErrorConfig("maxTime")||6e4,s=Date.now()-this.timeLimit;this.isTimeLimit||(this.timeLimit=Date.now()),this.isTimeLimit=!0;function n(){if(r.cache.length){clearTimeout(o),o=0,r.onSubmit&&r.onSubmit(r.cache);var e=r.addCacheExtension(),t=+new Date;try{if(r.errorCount=r.errorCount+r.cache.length,s<=a){if(r.errorCount>=i)return}else r.isTimeLimit=!1,r.errorCount=0}catch(e){console.log(e)}var n=r.doSend({url:r.cfgManager.url,data:e,success:function(){r.nextCache=[];try{delete r.cacheSending[t]}catch(e){console.log(e)}},fail:function(){r.getJsErrorConfig("disableCache")||D.add(r.nextCache)}});r.cacheSending[t]={xhr:n,cache:e},r.nextCache=e,r.cache=[]}}var c=t.jsError&&t.jsError.delay||100;e?n():o||-1===c||(o=setTimeout(n,c))}},{key:"addCacheExtension",value:function(){var e=this.cfgManager,o=this.cache,i=[],a=e.jsError&&e.jsError.ext;if(!o||!o.length)return i;for(var t=function(e){var t=o[e];a&&"object"===f(a)&&(t=j(t.toJson(),a));var n={type:"jsError",value:1,ts:t.ts,tags:t};if("resourceError"===t.type&&(n.type="resourceError",delete t.type),i.push(n),t.flow_ids){var r=t.flow_ids.split(";").map(function(e){return{type:"browser.flow.relation",value:1,ts:+new Date,tags:u({flow_id:e},n.type+"_id",t.id)}});i=i.concat(r)}},n=0;n<o.length;n++)t(n);return i}},{key:"doSend",value:function(e){var t=0<arguments.length&&void 0!==e?e:{};if(t&&t.data){t.beforeSend&&t.beforeSend();var n=[{category:"met_fe_web_log",env:l({token:this.cfgManager.token},this.cfgManager.clientInfo,{},this.cfgManager._tags),logs:t.data}];return this.beacon.send(n,t)}}}]),n}();var J=function(){function r(e,t){var n=this;o(this,r),this.cfgManager=e,this.errManager=t,this.getResourceErrorConfig=function(e){return n.cfgManager.resourceError&&n.cfgManager.resourceError[e]}}return e(r,[{key:"parseType",value:function(e){if(!e)return"";switch(e){case"script":return"js";case"link":return"css";case"img":return"image";default:return e}}},{key:"filterResource",value:function(e){var t=!0,n=this.getResourceErrorConfig("ignoreList")||[];try{for(var r=0;r<n.length;r++){if(new RegExp(n[r]).test(e)){t=!1;break}}return t}catch(e){return console.log(e),t}}},{key:"parseResourceError",value:function(e){var t,n,r,o=this,i=e.target||e.srcElement;try{if(!(i instanceof HTMLScriptElement||i instanceof HTMLLinkElement||i instanceof HTMLImageElement))return;t=i.src||i.href,n=i.nodeName,r=t,"img"===n&&(r=function(e){var t=e.split("//");if(t&&1<t.length)return t[0]+"//"+t[1].split("/")[0]+"/images"}(t)),!r||o.filterResource(r)&&o.errManager._pushResource({type:"resourceError",sec_category:n,content:t,ts:+new Date})}catch(e){this.errManager.reportSystemError(e)}}}]),r}();window.autoincrement=1;var H={activate:"activate",create:"create",config:"config",tag:"tag",timing:"sendTiming",count:"sendCount",gauge:"sendGauge",send:"send",stop:"stop",on:"_on",enable:"enable",test:"testStart",testEnd:"testEnd",sendJsError:"sendJsError"},V=function(){function c(e){var t=this;o(this,c),u(this,"_PERF_CATEGORY","fe_perf_web"),u(this,"_SNIFFER_CATEGORY_V1","met_fe_web_log"),u(this,"_SNIFFER_REG",/^sniffer/),u(this,"_SEND_DELAY",100),this.trackerConfig=l({useCombo:!0,sampleRate:100,url:"".concat(location.protocol,"//dreport.meituan.net"),getFlowIds:function(){return t._testQueue.map(function(e){return e.flow_id}).join(";")},clientInfo:this.clientInfo},e),this.client=new L,this.beacon=new x(this.trackerConfig.url),this._visitCode=this._random(),this._queue=[],this._snifferQueueV1=[],this._testQueue=[],this._tags={},this._testQueueId=0,this.jsErrCore=null,this.resourceErrCore=null,this.clientInfo={}}return e(c,[{key:"create",value:function(e,t){this._app=e,this.trackerConfig=l({},this.trackerConfig,{},t,{sampleRate:5,token:e}),this.getClientInfo(),this.send("resources")}},{key:"getClientInfo",value:function(){if(g(this.clientInfo).length)return this.clientInfo;var e=this.client.getInfo();return this.trackerConfig.clientInfo=e,this.clientInfo=e}},{key:"config",value:function(e,t){var r,o,n=this;if(void 0!==t)switch(e){case"sampleRate":"number"==typeof t&&(this.trackerConfig.sampleRate=t);break;case"useCombo":"boolean"==typeof t&&(this.trackerConfig.useCombo=t);break;case"jsError":"object"===f(t)&&(t.maxSize=t.maxSize||10240),this.trackerConfig.jsError=t,this.jsErrCore=new F(this.trackerConfig,this),window._mta_&&(window._mta_.js_error_queue&&window._mta_.js_error_queue.map(function(e){var t;(t=n.jsErrCore).parseWindowError.apply(t,d(e))}),window._mta_.unhandledrejection_error_queue&&window._mta_.unhandledrejection_error_queue.map(function(e){var t;(t=n.jsErrCore).parsePromiseUnhandled.apply(t,d(e))}),window._mta_.js_error_queue=[],window._mta_.unhandledrejection_error_queue=[]),window._mta_js_error_queue=[],function(e){var t=window.onerror;if(e){if(window._mta_)(window.removeEventListener||window.detachEvent)("unhandledrejection",window._mta_.unhandledrejectionHandler),window._mta_.isReady=!0;if(!1!==e.jsErrorEnable)window.onerror=function(){e.parseWindowError.apply(e,arguments),t&&t.apply(window,arguments)},(window.addEventListener||window.attachEvent)("unhandledrejection",function(){e.parsePromiseUnhandled.apply(e,arguments)});if(!0===e.getJsErrorConfig("enableConsole")){if(!window.console||!window.console.error)return;var n=window.console.error;window.console.error=function(){e.parseConsoleError.apply(e,arguments),n&&n.apply(window.console,arguments)}}}}(this.jsErrCore),this.jsErrCore.checkCache();break;case"browser.ajax.business":this.trackerConfig["browser.ajax.business"]=t;case"beaconImage":"string"==typeof t&&-1===t.indexOf("frep.meituan.")&&this.beacon.config(this.trackerConfig.url=t);break;case"resourceError":this.trackerConfig.resourceError=t,this.resourceErrCore=new J(this.trackerConfig,this.jsErrCore),function(e){if(e){var t=window.addEventListener||window.attachEvent;if(window._mta_)(window.removeEventListener||window.detachEvent)("error",window._mta_.resourceErrorHandler,!0);!1!==e.getResourceErrorConfig("enable")&&t("error",function(){e.parseResourceError.apply(e,arguments)},!0)}}(this.resourceErrCore),window._mta_&&(window._mta_.resource_error_queue&&window._mta_.resource_error_queue.map(function(e){var t;(t=n.resourceErrCore).parseResourceError.apply(t,d(e))}),window._mta_.resource_error_queue=[]),window._mta_resource_error_queue=[];case"click":"object"===f(t)&&(this.trackerConfig.click=t).enable&&(r=Date.now(),o=0,window.addEventListener?window.addEventListener("click",i,!0):document.attachEvent("onclick",i));case"scrollFPS":"object"===f(t)&&(this.trackerConfig.scrollFPS=t)}function i(e){if(o++,6e4<Date.now()-r&&(r=Date.now(),o=0),o<=20){var t=e.target?e.target:e.srcElement,n=t&&t.outerHTML;n&&200<n.length&&(n=n.slice(0,200)),window.mta&&window.mta("count","browser.click",1,{page_url:window.location.href,outerHTML:n,tagName:t&&t.tagName,id:t&&t.id,className:t&&t.className,name:t&&t.name})}}}},{key:"tag",value:function(e,t){"string"==typeof e&&e.length&&(void 0!==f(t)?this._tags[e]=t:delete this._tags[e],this.trackerConfig._tags=this._tags)}},{key:"execute",value:function(){for(var e=[],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++)try{var i=n[o];if(y(i))n[o](this);else{var a=(i=[].slice.call(i,0))[0],s=this[H[a]].apply(this,i.slice(1));s&&e.push(s)}}catch(e){e++}return 1===e.length?e[0]:e}},{key:"push",value:function(){return this.execute.apply(this,arguments)}},{key:"send",value:function(e,t,n,r){var o=this;if(e&&!(-1<["xhr-dispatch","xhr-result.load","browser.xhr"].indexOf(e)))if("page"!==e)if("resources"!==e)if("jsError"!==e){if(!(t&&t.url&&/catfront|dreport/.test(t.url))){var i=c.plugins[e];i&&(t=i.data(t),r=i.type);var a={};if(t)if("[object Array]"===Object.prototype.toString.call(t)){var s=t.map(function(e){return e.type=e.type||"timer",e.tags=e.tags||o._tags,e});this._queue=this._queue.concat(s)}else a[e]=t,this._push(r||"timer",a,n);this._timer&&(window.clearTimeout(this._timer),this._timer=null),this._timer=window.setTimeout(function(){o._sendData()},this._SEND_DELAY)}}else this.sendJsError(t);else this._sendResources();else this._sendPage()}},{key:"sendJsError",value:function(e,t){this.jsErrCore.report(e,t)}},{key:"getId",value:function(){return O()}},{key:"clearTestTimer",value:function(t,n){var e=this._testQueue.findIndex(function(e){return e.data===t&&e.id===n});-1<e&&(clearTimeout(this._testQueue[e].timer),this._testQueue.splice(e,1))}},{key:"testEnd",value:function(t,n,e,r){var o=this._testQueue.findIndex(function(e){return e.data===t&&e.id===n});-1<o&&(e.flow_id=this._testQueue[o].flow_id,r?(e.log&&delete e.log,this.send("flow.sucess",t,e,"flow.success")):(e.log&&(e.log=JSON.stringify(e.log)),this.send("flow.fail",t,e,"flow.fail")),this.clearTestTimer(t,n))}},{key:"testStart",value:function(r,o,e){var i=this;o.log=o.log||{};var a=this._testQueueId,t=this.getId();this._testQueueId++;var n=setTimeout(function(){i.testEnd(r,a,o,!1)},e||2e3);this._testQueue.push({data:r,timer:n,tags:o,id:a,flow_id:t});function s(e,t){var n=!0;if(e)try{n=e()}catch(e){n=!1,console.warn("test callback error",e)}if(t)if(o.log&&"string"==typeof o.log)try{o.log=JSON.parse(o.log),o.log=Object.assign({},o.log,t)}catch(e){console.warn("log:",o.log),console.warn("add extral log failed",e)}else o.log&&"object"===f(o.log)?o.log=Object.assign({},o.log,t):o.log=t;i.testEnd(r,a,o,n)}return s.cancel=function(){return i.clearTestTimer(r,a)},s.test=function(e,t){return s(e,t)},s}},{key:"sendTiming",value:function(e,t,n){this.send(e,t||1,n,"timer")}},{key:"sendCount",value:function(e,t,n){this.send(e,t||1,n,"counter")}},{key:"sendGauge",value:function(e,t,n){this.send(e,t||1,n,"gauge")}},{key:"enable",value:function(e,t){if(this._isSampleHit()&&("fcp"===e||"tti"===e||"scrollFPS"===e||"page"===e)){var r=this,n=c.plugins[e],o=function(e,t,n){r.sendTiming(e,t,n)};if(n)try{"scrollFPS"===e?n.data(this.trackerConfig[e],t,o):n.data(t,o)}catch(e){}}}},{key:"activate",value:function(e,t,n){if(this._isSampleHit()&&"fps"===e){var r=this,o=c.plugins.fps;if(o)try{this._fps=o.data(t,n,function(e,t,n){r.sendTiming(e,t,n)}),this._fps.activate()}catch(e){}}}},{key:"stop",value:function(e){this._fps&&"fps"===e&&this._fps.stop()}},{key:"_push",value:function(e,t,n){var r=g(t)[0];if("flow.fail"===e||"flow.success"===e){var o={flow_name:t[r],page_url:location.href.split("?")[0],real_url:location.href,id:n.flow_id},i=n.log;this._snifferQueueV1.push({type:e,data:u({},e,1),tags:o,ts:String((new Date).valueOf()),raw:i})}else{if("browser.ajax.business"===r){var a=this.trackerConfig.getFlowIds();if(n.flow_ids=a,n.id=this.getId(),a){var s=a.split(";").map(function(e){return{type:"browser.flow.relation",data:{"browser.flow.relation":1},ts:+new Date,tags:{flow_id:e,ajax_id:n.id}}});this._snifferQueueV1=this._snifferQueueV1.concat(s)}}this._queue.push({type:e,data:t,tags:n||this._tags,ts:String((new Date).valueOf())})}}},{key:"_on",value:function(e,t){C.on(e,t)}},{key:"_sendPage",value:function(){var e=c.plugins.page;e&&e.data()}},{key:"_sendResources",value:function(){var e=this.trackerConfig.resources&&this.trackerConfig.resources.sampleRate||10;if(!(100*Math.random()>e)){var t=c.plugins.resources;if(t)try{var n=t.data();if(!n)return;for(var r=0;r<n.length;r++)for(var o=0;o<n[r].length;o++)this.sendTiming("browser.resource",[n[r][o]])}catch(e){console.error(e)}}}},{key:"_formatAndSendData",value:function(e,t,n){var r=this,o=null,i=[];if(t.length)if(e)1===t.length?i=this._formatLogType(t[0]):m(t,function(e){i.push.apply(i,d(r._formatLogType(e)))}),o=this._formatReportData(i,n),C.emit("data",o),this.beacon.send(o);else for(var a=0;a<t.length;a++){var s=this._formatLogType(t[a]);o=this._formatReportData(s,n),C.emit("data",o),this.beacon.send(o)}}},{key:"_sendData",value:function(){if(this._isSampleHit()){var e=this.trackerConfig.useCombo;this._formatAndSendData(e,this._queue),this._queue=[],this._formatAndSendData(e,this._snifferQueueV1,"flow"),this._snifferQueueV1=[]}}},{key:"_formatLogType",value:function(e){var t=e.data,n=e.tags,r=e.ts,o=(e.type,g(t)[0]),i=g(t[o]),a="browser.ajax"===o,s=w(i,function(e){return"url"!==e&&"method"!==e});return e.raw?[{type:o,value:t[o],tags:n,ts:r,raw:e.raw}]:a?w(v(s,function(e){return{ts:r,type:"".concat(o,".").concat(e),value:String(Number(t[o][e])),tags:l({url:t[o].url,method:t[o].method.toUpperCase()},n)}}),function(e){var t=e.type,n=e.value;return!("browser.ajax.error"===t&&"0"===n)}):i.length?v(i,function(e){return{type:"".concat(o,".").concat(e),value:t[o][e],tags:n,ts:r}}):[{type:o,value:t[o],tags:n,ts:r}]}},{key:"_formatReportData",value:function(e,t){var n=l({token:this._app,url:location.href,sdkVersion:"1.1.7"},this.clientInfo,{},this._tags),r=this._PERF_CATEGORY;"flow"===t&&(r=this._SNIFFER_CATEGORY_V1);var o={category:r,logs:e,env:{}};return m(g(n),function(e){o.env[e]=n[e]}),[o]}},{key:"_random",value:function(){return Math.round(2147483647*Math.random())}},{key:"_isSampleHit",value:function(){return this._visitCode%1e4<100*this.trackerConfig.sampleRate}}],[{key:"addPlugin",value:function(e,t){if(!y(t.data))throw new Error("Can't add plugin ".concat(e,". The plugin object of data props should be")+" a function, but its type is ".concat(f(t.data)));c.plugins[e]=t}}]),c}();u(V,"plugins",{});function Q(e){var t=window[e];if(y(t)&&!(t.q&&t.q.isInitialized&&t.q.initialized())){var n=new V,r=t?t.q:[];if(t.q=n,p(r)){var o=[],i=[];r.forEach(function(e){e&&!e.length?o.push(e):i.push(e)}),n.execute.apply(n,i),o.map(function(e){return e.hanlder=n.execute.apply(n,[e.arguments]),e.hasCanceled?e.hanlder.cancel():e.hasEnded&&e.hanlder.test(function(){return e.success},e.log),e})}}}var B,G={type:"timer",data:function(e){var t=0<arguments.length&&void 0!==e?e:0,n=window.performance||window.mozPerformance;if(n&&n.timing&&!(t<=0)){var r=t-n.timing.navigationStart;if(!(r<=0))return r}}},U={type:"timer",data:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:{},o=2<arguments.length?n:void 0,i=window.requestAnimationFrame;if(y(i)){var a=e&&e.duration||6e4,s=e&&e.maxCount||null,c=0,u=0,l=null,f=null;return{activate:function(){C.addEvent("blur",g),C.addEvent("focus",h),C.addEvent("visibilitychange",p),document.hasFocus()&&(d(),m())},stop:v}}function d(){u++,l=i(d)}function h(){(!s||c<s)&&(u=0,d(),m())}function g(){l&&cancelAnimationFrame(l),f&&clearInterval(f)}function p(){document.hidden?g():h()}function v(){l&&cancelAnimationFrame(l),f&&clearInterval(f),C.removeEvent("blur",g),C.removeEvent("focus",h),C.removeEvent("visibilitychange",p)}function m(){f&&clearInterval(f),f=setInterval(function(){l&&cancelAnimationFrame(l),c++;try{o&&o("browser.page",{fps:Math.min(60,u/(a/1e3))},r)}catch(e){}u=0,s&&s<=c?v():d()},a)}}},z={type:"timer",data:function(){var c=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance;if(c){var u=null,l=0;!function e(){l++,u&&(window.clearTimeout(u),u=null);var t=c.timing;if(t.loadEventEnd){var n=[{data:{"page.redirect":T(t.fetchStart,t.navigationStart)},ts:t.fetchStart},{data:{"page.dns":T(t.domainLookupEnd,t.domainLookupStart)},ts:t.domainLookupEnd},{data:{"page.connect":T(t.connectEnd,t.connectStart)},ts:t.connectEnd},{data:{"page.network":T(t.connectEnd,t.navigationStart)},ts:t.connectEnd},{data:{"page.send":T(t.responseStart,t.requestStart)},ts:t.responseStart},{data:{"page.receive":T(t.responseEnd,t.responseStart)},ts:t.responseEnd},{data:{"page.backend":T(t.responseEnd,t.requestStart)},ts:t.responseEnd},{data:{"page.render":T(t.loadEventEnd,t.loadEventStart)},ts:t.loadEventEnd},{data:{"page.dom":T(t.domComplete,t.domLoading)},ts:t.domComplete},{data:{"page.frontend":T(t.loadEventEnd,t.domLoading)},ts:t.loadEventEnd},{data:{"page.load":T(t.loadEventEnd,t.navigationStart)},ts:t.loadEventEnd},{data:{"page.domReady":T(t.domContentLoadedEventStart,t.navigationStart)},ts:t.domContentLoadedEventStart},{data:{"page.interactive":T(t.domInteractive,t.navigationStart)},ts:t.domInteractive},{data:{"page.ttf":T(t.fetchStart,t.navigationStart)},ts:t.fetchStart},{data:{"page.ttr":T(t.requestStart,t.navigationStart)},ts:t.requestStart},{data:{"page.ttdns":T(t.domainLookupStart,t.navigationStart)},ts:t.domainLookupStart},{data:{"page.ttconnect":T(t.connectStart,t.navigationStart)},ts:t.connectStart},{data:{"page.ttfb":T(t.responseStart,t.navigationStart)},ts:t.responseStart}];if("object"===("undefined"==typeof M?"undefined":f(M))&&M.subresources&&M.subresources.names&&void 0!==window.SubResoucesTiming){var r=M.subresources.lastImage||"",o=M.subresources.firstImage||"",i=new window.SubResoucesTiming(M.subresources.names,r,o);i.length&&"fsImg"===i[i.length-1].id&&(n.push({data:{"page.atf":i[i.length-1].start},ts:String((new Date).valueOf())}),n.push({data:{"page.c_atf":i[i.length-1].start-T(t.responseStart,t.navigationStart)},ts:String((new Date).valueOf())}))}var a=0;try{c.getEntriesByType("paint").forEach(function(e,t,n){"first-paint"===e.name&&(a=e.startTime)})}catch(e){}if(!a&&t.msFirstPaint&&"number"==typeof t.msFirstPaint&&(a=T(t.msFirstPaint,t.navigationStart)),!a&&window.chrome&&window.chrome.loadTimes){var s=window.chrome.loadTimes();a=Math.round(1e3*(s.firstPaintTime-s.startLoadTime))}("number"!=typeof a||a<0)&&(a=void 0),n.push({data:{"page.firstPaint":a},ts:String((new Date).valueOf())}),"undefined"!=typeof M&&M.TimeTracker&&M.TimeTracker.fst&&n.push({data:{"page.firstScreen":T(M.TimeTracker.fst,t.navigationStart)},ts:M.TimeTracker.fst}),window.mta&&window.mta("send","_page",n)}else l<10&&(u=window.setTimeout(e,100))}()}}},K={type:"timer",data:function(){var e=window.performance||window.mozPerformance;if(e&&e.getEntriesByType){for(var t,n=e.getEntriesByType("resource"),r=[],o=0;o<n.length;o++){var i=n[o],a="".concat(i.name,"?"),s={path:a.slice(0,a.indexOf("?")),type:i.initiatorType},c=[{data:{"browser.resource.receive":T(i.responseEnd,i.fetchStart)},ts:(t=i.responseEnd,parseInt(t)+parseInt(window.performance.timeOrigin)),tags:s}];r.push(c)}return r}}},W={type:"timer",data:function(e,t){var r=0<arguments.length&&void 0!==e?e:{},o=1<arguments.length?t:void 0,n=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance,i=100,a=20,s=null,c=0;n&&n.getEntriesByType&&!function e(){c++,s&&(window.clearTimeout(s),s=null);var t=n.getEntriesByType("paint");t&&t.length?t.forEach(function(e,t,n){"first-contentful-paint"===e.name&&function(e){try{o&&o("browser.page",[{data:{"browser.page.fcp":e},ts:parseInt(e)+parseInt(window.performance.timeOrigin),tags:r}])}catch(e){}}(e.startTime)}):c<a&&(s=window.setTimeout(e,i))}()}},X={type:"timer",data:function(e,t){var n=0<arguments.length&&void 0!==e?e:{},r=1<arguments.length?t:void 0;I&&I.getFirstConsistentlyInteractive().then(function(e){!function(e){try{r&&r("browser.page",{tti:e},n)}catch(e){}}(e)})}},Y={type:"timer",data:function(e,t,n){var r=1<arguments.length&&void 0!==t?t:{},o=2<arguments.length?n:void 0,i=window.requestAnimationFrame;if(y(i)){var a,s,c,u=e&&e.selectors||[],l=[],f=0,d=!1,h=0,g=0,p=0,v=function(e){var t=(d=e)?"scrollstart":"scrollstop";window.dispatchEvent(new Event(t))};C.addEventToSelectors(u,"scroll",function(){d||v(!0),clearTimeout(s),s=setTimeout(function(){v(!1)},50)}),C.addEvent("scrollstart",function(){console.log("scrollstart"),clearTimeout(c),h=performance.now(),a=i(w)}),C.addEvent("scrollstop",function(){console.log("scrollstop"),g=performance.now(),10<=l.length&&(p+=g-h,f+=l.filter(function(e){return h<=e&&e<=g-1e3/60}).length),l=[],window.cancelAnimationFrame(a),c=setTimeout(function(){if(10<=f){var e=1e3*f/p,t=Math.round(10*e)/10;m(t)}l=[],f=p=g=h=0},1e3)});var m=function(e){try{o&&o("browser.page",{scrollFPS:e},r)}catch(e){}},w=function e(t){l.push(t),a=i(e)}}}};V.addPlugin("browser.page.business",G),V.addPlugin("fps",U),V.addPlugin("page",z),V.addPlugin("resources",K),V.addPlugin("fcp",W),V.addPlugin("tti",X),V.addPlugin("scrollFPS",Y),B=function(){if(window.MeituanAnalyticsObject){var e=window.MeituanAnalyticsObject;"[object String]"===Object.prototype.toString.call(e)&&(e=[e]);for(var t=0;t<e.length;t++)Q(e[t])}},"complete"===document.readyState?B():C.addEvent("load",B)}();
